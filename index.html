<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0">
    <title>PG Coin Mining & Games</title>
    <style>
        /* --- Global Styles & Fonts --- */
        @import url('https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@400;600;700&display=swap');

        :root {
            --primary-color: #00e5ff;
            --secondary-color: #7b2cbf;
            --background-color: #0d0c22;
            --surface-color: #191835;
            --text-color: #e0e0e0;
            --glow-color: rgba(0, 229, 255, 0.7);
            --green-glow: #00ff7f;
            --red-glow: #ff4d4d;
            --orange-color: #e67e22;
            --yellow-color: #f1c40f;
        }

        body {
            font-family: 'Hind Siliguri', sans-serif;
            background-color: var(--background-color);
            color: var(--text-color);
            margin: 0; padding: 0;
            display: flex; justify-content: center; align-items: center;
            height: 100vh; overflow: hidden; touch-action: none;
        }

        /* --- View Management --- */
        .view {
            display: none; width: 100%; height: 100%; position: absolute;
            top: 0; left: 0; animation: fadeIn 0.5s ease-in-out;
            flex-direction: column; justify-content: flex-start; align-items: center;
            overflow-y: auto; -ms-overflow-style: none; scrollbar-width: none;
        }
        .view::-webkit-scrollbar { display: none; }
        .view.active { display: flex; }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.98); }
            to { opacity: 1; transform: scale(1); }
        }

        /* --- Common Page Styles --- */
        .page-container {
            width: 100%; max-width: 420px;
            padding: 25px; text-align: center; box-sizing: border-box;
        }
        .page-header {
            display: flex; align-items: center; justify-content: center;
            position: relative; margin-bottom: 20px;
        }
        .back-button {
            position: absolute; left: 0; background: var(--surface-color);
            border: 1px solid var(--secondary-color); color: var(--primary-color);
            width: 40px; height: 40px; border-radius: 50%;
            font-size: 24px; cursor: pointer; display: flex;
            align-items: center; justify-content: center;
        }
        .page-title {
            color: var(--primary-color); font-size: 1.8em;
            text-shadow: 0 0 10px var(--glow-color); margin: 0;
        }

        /* --- Mining App Styles --- */
        #mining-section .container {
            width: 100%; max-width: 420px; height: 100%; max-height: 800px;
            background: linear-gradient(145deg, var(--surface-color), #211f42);
            border-radius: 30px; padding: 25px; box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            text-align: center; display: flex; flex-direction: column;
            justify-content: space-between; border: 2px solid var(--secondary-color);
            box-sizing: border-box;
        }
        #top-balance-bar {
            background: rgba(0, 0, 0, 0.3); padding: 10px 20px; border-radius: 12px;
            margin-bottom: 15px; display: flex; justify-content: space-between;
            align-items: center; border: 1px solid var(--secondary-color);
        }
        #top-balance-bar div { font-size: 1.2em; font-weight: 600; }
        #top-balance-bar #pg-balance-top { color: var(--primary-color); }
        #top-balance-bar #usd-balance-top { color: var(--green-glow); }

        #mining-section h1 { color: var(--primary-color); margin-bottom: 10px; font-size: 2.2em; text-shadow: 0 0 10px var(--glow-color); }
        .mining-display {
            background-color: rgba(0,0,0,0.2); padding: 20px; border-radius: 20px;
            margin-bottom: 15px; border: 1px solid var(--secondary-color);
            box-shadow: inset 0 0 15px rgba(0,0,0,0.3);
        }
        .mining-display h2 { margin: 0 0 10px 0; color: var(--text-color); font-weight: 400; font-size: 1.3em; }
        #balance { font-size: 2.5em; font-weight: 700; color: var(--primary-color); text-shadow: 0 0 8px var(--glow-color); word-wrap: break-word; margin-bottom: 15px; }
        
        .action-boxes { display: flex; gap: 15px; margin-bottom: 15px; }
        .action-box {
            flex: 1; background: rgba(0,0,0,0.2); border: 1px solid var(--secondary-color);
            border-radius: 15px; padding: 15px 10px; cursor: pointer; transition: background-color 0.2s;
        }
        .action-box:hover { background-color: rgba(0, 229, 255, 0.1); }
        .action-box svg { width: 32px; height: 32px; margin-bottom: 5px; color: var(--primary-color); }
        .action-box span { font-size: 1em; font-weight: 600; color: var(--text-color); }

        #status-container { font-size: 1.2em; margin-bottom: 10px; }
        #status.mining { color: var(--green-glow); font-weight: 600; animation: glow-green 1.5s infinite alternate; }
        #status.stopped { color: var(--red-glow); font-weight: 600; }
        @keyframes glow-green {
            from { text-shadow: 0 0 5px var(--green-glow), 0 0 10px var(--green-glow); }
            to { text-shadow: 0 0 15px var(--green-glow), 0 0 20px var(--green-glow); }
        }
        #timer { font-size: 1.3em; font-weight: 600; color: #ccc; min-height: 25px; }

        #mining-button, #watch-ad-button {
            width: 100%; padding: 18px; font-size: 1.5em; font-weight: 700;
            font-family: 'Hind Siliguri', sans-serif; border: none; border-radius: 15px;
            cursor: pointer; transition: all 0.3s ease; box-sizing: border-box;
        }
        #mining-button {
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            color: var(--background-color); box-shadow: 0 5px 20px rgba(123, 44, 191, 0.4);
            margin-bottom: 10px;
        }
        #mining-button:hover { transform: translateY(-3px); box-shadow: 0 8px 25px rgba(0, 229, 255, 0.5); }
        #mining-button:disabled { background: #555; color: #999; cursor: not-allowed; box-shadow: none; transform: none; }
        
        #watch-ad-button {
             background: linear-gradient(45deg, var(--yellow-color), var(--orange-color));
             color: var(--background-color); margin-bottom: 15px; font-size: 1.2em; padding: 15px;
        }
        
        .nav-bar {
            display: flex; justify-content: space-around; align-items: center; background: rgba(0,0,0,0.2);
            padding: 10px 5px; border-radius: 15px; border-top: 1px solid var(--secondary-color);
        }
        .nav-bar button {
            background: transparent; border: none; color: var(--text-color); cursor: pointer;
            text-align: center; font-size: 0.8em; display: flex; flex-direction: column;
            align-items: center; gap: 5px; transition: color 0.2s; flex: 1;
        }
        .nav-bar button:hover, .nav-bar button.active { color: var(--primary-color); }
        .nav-bar svg { width: 28px; height: 28px; }
        
        /* --- Plans Section --- */
        #plans-section .plan-grid { display: grid; grid-template-columns: 1fr; gap: 20px; width: 100%; }
        .plan-card {
            background: linear-gradient(145deg, var(--surface-color), #211f42);
            border: 1px solid var(--secondary-color); border-radius: 15px; padding: 20px;
            text-align: left; box-shadow: 0 5px 15px rgba(0,0,0,0.3); transition: transform 0.2s, box-shadow 0.2s;
        }
        .plan-card.free-plan { border-color: var(--primary-color); }
        .plan-card:hover { transform: translateY(-5px); box-shadow: 0 8px 25px var(--glow-color); }
        .plan-card h3 { color: var(--primary-color); margin: 0 0 15px 0; font-size: 1.5em; text-align: center; }
        .plan-details { list-style: none; padding: 0; margin: 0 0 20px 0; }
        .plan-details li { margin-bottom: 8px; font-size: 1em; display: flex; justify-content: space-between; }
        .plan-details li span { color: #ccc; }
        .plan-details li strong { color: white; font-weight: 600; }
        .plan-details .roi.positive { color: var(--green-glow); }
        .plan-details .roi.negative { color: var(--red-glow); }
        .buy-plan-btn {
            width: 100%; padding: 12px; font-size: 1.2em; font-weight: 700;
            background: linear-gradient(45deg, var(--yellow-color), var(--orange-color));
            color: var(--background-color); border: none; border-radius: 10px; cursor: pointer;
        }
        .buy-plan-btn.ad-btn { background: linear-gradient(45deg, var(--primary-color), var(--secondary-color)); }
        .plans-divider { text-align: center; color: var(--primary-color); margin: 20px 0; font-weight: bold; }
        
        /* --- Tasks Section --- */
        #tasks-section .task-placeholder { margin-top: 50px; font-size: 1.3em; color: #aaa; }
        
        /* --- Withdrawal Section --- */
        #withdrawal-section .withdrawal-form {
            background: var(--surface-color); padding: 20px; border-radius: 15px;
            border: 1px solid var(--secondary-color); margin-bottom: 25px;
        }
        #withdrawal-section h3 { color: var(--primary-color); margin-top: 0; }
        #withdrawal-section p { color: #ccc; font-size: 0.9em; }
        #withdrawal-section input {
            width: 100%; background: var(--background-color); border: 1px solid var(--secondary-color);
            border-radius: 8px; padding: 12px; color: white; font-size: 1em;
            margin-bottom: 15px; box-sizing: border-box;
        }
        #withdrawal-section .withdraw-btn-group { display: flex; gap: 10px; }
        #withdrawal-section .withdraw-btn {
            flex: 1; padding: 12px; border: none; border-radius: 8px; font-weight: bold;
            font-size: 1em; cursor: pointer;
        }
        .withdraw-btn.bkash { background-color: #e2136e; color: white; }
        .withdraw-btn.binance { background-color: #f0b90b; color: #1e2329; }


        /* --- Game Section --- */
        #game-section { background-color: #333; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        #game-section #back-to-mining-game { position: absolute; top: 15px; right: 15px; z-index: 20; background: var(--yellow-color); color: #333; border: none; padding: 8px 15px; border-radius: 10px; font-family: 'Hind Siliguri', sans-serif; cursor: pointer; font-weight: bold; }
        #game-section h1 { color: var(--primary-color); text-shadow: 2px 2px 4px #000; }
        #game-section #game-container { position: relative; width: 80vw; max-width: 600px; height: 70vh; max-height: 700px; background: #001f3f; border: 3px solid var(--secondary-color); border-radius: 10px; overflow: hidden; cursor: crosshair; }
        #game-section .falling-object { position: absolute; font-size: 28px; user-select: none; cursor: pointer; transition: transform 0.1s ease-out; padding: 12px; text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.5); }
        #game-section .falling-object.collected { animation: collect-effect 0.3s ease-out forwards; pointer-events: none; }
        @keyframes collect-effect { 0% { transform: scale(1); opacity: 1; } 100% { transform: scale(1.5); opacity: 0; } }
        #game-section #scoreboard { margin-bottom: 15px; font-size: 1.2em; background-color: rgba(0, 0, 0, 0.3); padding: 10px 20px; border-radius: 8px; color: white; border: 1px solid var(--secondary-color); }
        #game-section #scoreboard span { font-weight: bold; color: var(--primary-color); }
        #game-section #scoreboard #timer-value { color: var(--yellow-color); }
        #game-section #scoreboard #usdt-score { color: var(--green-glow); }
        #game-section #game-over { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(0, 0, 0, 0.85); padding: 30px; border-radius: 15px; text-align: center; display: none; z-index: 10; width: 80%; border: 1px solid var(--primary-color); }
        #game-section #game-over-title { margin-top: 0; color: var(--red-glow); }
        #game-section #restart-button { padding: 12px 25px; font-size: 1.1em; cursor: pointer; background-color: var(--green-glow); color: var(--background-color); border: none; border-radius: 5px; margin-top: 15px; font-weight: bold; }
        #game-section #restart-button:hover { filter: brightness(1.1); }
    </style>
</head>
<body>

    <!-- Mining App View -->
    <div id="mining-section" class="view active">
        <div class="container">
            <div>
                <div id="top-balance-bar">
                    <div>PG <span id="pg-balance-top">0.0000</span></div>
                    <div>$ <span id="usd-balance-top">0.00</span></div>
                </div>
                <h1>PG Coin Mining</h1>
                <div class="mining-display">
                    <h2>Your Balance</h2>
                    <p id="balance">0.0000 PG</p>
                    <div class="action-boxes">
                        <div class="action-box" onclick="handleInviteClick()">
                            <svg fill="currentColor" viewBox="0 0 24 24"><path d="M18 2h-3a4 4 0 0 0-4 4v2H8v4h3v8h4v-8h3l1-4h-4V6a1 1 0 0 1 1-1h2z"/></svg>
                            <span>Invite</span>
                        </div>
                        <div class="action-box" onclick="handleConvertClick()">
                            <svg fill="currentColor" viewBox="0 0 24 24"><path d="m21.435 2.585-2.02 2.02c-1.39-1.12-3.23-1.6-5.06-1.6h-1.355L14.435 6H7.565L6.13 3.005H5.06c-3.61 0-6.68 2.68-7.04 6.22l2.12.35c.32-2.82 2.89-5.07 5.86-5.07h.75l1.435 3h6.87l1.435-3h.75c2.97 0 5.54 2.25 5.86 5.07l2.12-.35c-.35-3.54-3.42-6.22-7.03-6.22zm-18.87 18.83 2.02-2.02c1.39 1.12 3.23 1.6 5.06 1.6h1.355L9.565 18h6.87l1.435 2.995h1.075c3.61 0 6.68-2.68 7.04-6.22l-2.12-.35c-.32 2.82-2.89 5.07-5.86 5.07h-.75L14.565 21H7.695l-1.435-3h-.75c-2.97 0-5.54-2.25-5.86-5.07l-2.12.35c.35 3.54 3.42 6.22 7.03 6.22z"/></svg>
                            <span>CVT</span>
                        </div>
                    </div>
                    <p id="status-container">Status: <span id="status" class="stopped">Stopped</span></p>
                    <p id="timer"></p>
                </div>
                <button id="mining-button">Start Mining</button>
                <button id="watch-ad-button" onclick="handleWatchAd()">Watch Ads for Rewards</button>
            </div>
            <div class="nav-bar">
                 <button onclick="showView('mining-section')" class="active">
                    <svg fill="currentColor" viewBox="0 0 24 24"><path d="M12.71 2.29a1 1 0 0 0-1.42 0l-9 9a1 1 0 0 0 0 1.42A1 1 0 0 0 3 13h1v7a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-7h1a1 1 0 0 0 .71-1.71zM18 20H6v-9.59l6-6 6 6z"/></svg>
                    <span>Home</span></button>
                 <button onclick="showView('tasks-section')">
                    <svg fill="currentColor" viewBox="0 0 24 24"><path d="M15.54 10.5h-1a.5.5 0 0 1 0-1h1a.5.5 0 0 1 0 1zm-5.08 0H7.2a.5.5 0 0 1 0-1h3.26a.5.5 0 0 1 0 1zm5.08 4h-1a.5.5 0 0 1 0-1h1a.5.5 0 0 1 0 1zm-5.08 0H7.2a.5.5 0 0 1 0-1h3.26a.5.5 0 0 1 0 1zM21 4H3a1 1 0 0 0-1 1v14a1 1 0 0 0 1 1h18a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1zm-1 14H4V6h16z"/></svg>
                    <span>Tasks</span></button>
                <button onclick="showView('plans-section')">
                    <svg fill="currentColor" viewBox="0 0 24 24"><path d="M12 2C6.486 2 2 6.486 2 12s4.486 10 10 10 10-4.486 10-10S17.514 2 12 2zm3.414 12.828-5.656 2.828-2.828-5.656 5.656-2.828 2.828 5.656zM12 10c-1.103 0-2 .897-2 2s.897 2 2 2 2-.897 2-2-.897-2-2-2z"/></svg>
                    <span>Plans</span></button>
                <button onclick="showView('withdrawal-section')">
                    <svg fill="currentColor" viewBox="0 0 24 24"><path d="M5 20a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V8h2V6h-4V4a2 2 0 0 0-2-2H9a2 2 0 0 0-2 2v2H3v2h2v12zM9 4h6v2H9V4zm10 6H5v10h14V10z"></path><path d="M11 12h2v6h-2z"/></svg>
                    <span>Withdraw</span></button>
                <button onclick="showView('game-section')">
                    <svg fill="currentColor" viewBox="0 0 24 24"><path d="M3.5 11c.41 0 .79-.13 1.11-.34a.5.5 0 0 1 .45.89 2.49 2.49 0 0 1-3.12 0 .5.5 0 0 1 .45-.89A1.49 1.49 0 0 1 3.5 11zm17 0a1.49 1.49 0 0 1 1.11.34.5.5 0 0 1 .45-.89 2.49 2.49 0 0 1-3.12 0 .5.5 0 0 1 .45.89A1.49 1.49 0 0 1 20.5 11zM12 4.5a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-1 0v-1a.5.5 0 0 1 .5-.5zM6.27 6.27a.5.5 0 0 1 .71 0l.7.7a.5.5 0 0 1-.7.71l-.71-.7a.5.5 0 0 1 0-.71zm11.46 0a.5.5 0 0 1 .71.71l-.7.7a.5.5 0 0 1-.71-.7l.7-.7a.5.5 0 0 1 .01 0zM12 13a3 3 0 1 1 3-3 3 3 0 0 1-3 3zm0-5a2 2 0 1 0 2 2 2 2 0 0 0-2-2zm-1 12.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 0 1h-1a.5.5 0 0 1-.5-.5zM12 22a7 7 0 0 1-7-7 .5.5 0 0 1 1 0 6 6 0 0 0 12 0 .5.5 0 0 1 1 0 7 7 0 0 1-7 7z"/></svg>
                    <span>Game</span></button>
            </div>
        </div>
    </div>
    
    <!-- Other Views: Tasks, Plans, Withdrawal -->
    <div id="tasks-section" class="view">
        <div class="page-container">
            <div class="page-header">
                <button class="back-button" onclick="showView('mining-section')">‹</button>
                <h2 class="page-title">Daily Tasks</h2>
            </div>
            <p class="task-placeholder">New tasks are coming soon...!</p>
        </div>
    </div>

    <div id="plans-section" class="view">
        <div class="page-container">
             <div class="page-header">
                <button class="back-button" onclick="showView('mining-section')">‹</button>
                <h2 class="page-title">Mining Plans</h2>
            </div>
            <div class="plan-grid">
                <div class="plan-card free-plan">
                    <h3>Free Plan</h3>
                    <ul class="plan-details">
                        <li><span>💰 Price:</span> <strong>Free</strong></li>
                        <li><span>⚙️ Hash Power:</span> <strong>50 HP</strong></li>
                        <li><span>📈 Daily Income:</span> <strong>0.63 PG</strong></li>
                        <li><span>🎁 Bonus:</span> <strong>Refer 1 friend = +5 HP</strong></li>
                        <li><span>💸 Withdraw:</span> <strong>❌ Not available</strong></li>
                    </ul>
                </div>
                <div class="plans-divider">👇 UPGRADE TO UNLOCK FULL EARNING 👇</div>
                <div class="plan-card">
                    <h3>🟢 BASIC START</h3>
                    <ul class="plan-details">
                        <li><span>💵 Price:</span> <strong>$1</strong></li><li><span>⚙️ Hash Power:</span> <strong>100 HP</strong></li>
                        <li><span>📅 Duration:</span> <strong>30 Days</strong></li><li><span>📈 Daily PG:</span> <strong>1.26 PG</strong></li>
                        <li><span>🎁 Total PG:</span> <strong>37.8 PG</strong></li><li><span>💰 Value:</span> <strong>$1.05</strong></li>
                        <li><span>📊 ROI:</span> <strong class="roi positive">+5%</strong></li>
                    </ul><button class="buy-plan-btn" onclick="buyPlan(1)">Buy Now</button></div>
                <div class="plan-card">
                    <h3>🔵 STARTER PLUS</h3>
                    <ul class="plan-details">
                        <li><span>💵 Price:</span> <strong>$3</strong></li><li><span>⚙️ Hash Power:</span> <strong>350 HP</strong></li>
                        <li><span>📅 Duration:</span> <strong>30 Days</strong></li><li><span>📈 Daily PG:</span> <strong>4.41 PG</strong></li>
                        <li><span>🎁 Total PG:</span> <strong>132.3 PG</strong></li><li><span>💰 Value:</span> <strong>$2.65</strong></li>
                        <li><span>📊 ROI:</span> <strong class="roi negative">-11.6%</strong></li>
                    </ul><button class="buy-plan-btn" onclick="buyPlan(3)">Buy Now</button></div>
                <div class="plan-card">
                    <h3>🟣 SILVER BOOST</h3>
                    <ul class="plan-details">
                        <li><span>💵 Price:</span> <strong>$5</strong></li><li><span>⚙️ Hash Power:</span> <strong>700 HP</strong></li>
                        <li><span>📅 Duration:</span> <strong>30 Days</strong></li><li><span>📈 Daily PG:</span> <strong>9.24 PG</strong></li>
                        <li><span>🎁 Total PG:</span> <strong>277.2 PG</strong></li><li><span>💰 Value:</span> <strong>$5.54</strong></li>
                        <li><span>📊 ROI:</span> <strong class="roi positive">+10.8%</strong></li>
                    </ul><button class="buy-plan-btn" onclick="buyPlan(5)">Buy Now</button></div>
                <div class="plan-card">
                    <h3>🟠 GOLD MINER</h3>
                    <ul class="plan-details">
                        <li><span>💵 Price:</span> <strong>$10</strong></li><li><span>⚙️ Hash Power:</span> <strong>1600 HP</strong></li>
                        <li><span>📅 Duration:</span> <strong>30 Days</strong></li><li><span>📈 Daily PG:</span> <strong>21.84 PG</strong></li>
                        <li><span>🎁 Total PG:</span> <strong>655.2 PG</strong></li><li><span>💰 Value:</span> <strong>$13.10</strong></li>
                        <li><span>📊 ROI:</span> <strong class="roi positive">+31%</strong></li>
                    </ul><button class="buy-plan-btn" onclick="buyPlan(10)">Buy Now</button></div>
                <div class="plan-card">
                    <h3>🔶 DIAMOND PRO</h3>
                    <ul class="plan-details">
                        <li><span>💵 Price:</span> <strong>$25</strong></li><li><span>⚙️ Hash Power:</span> <strong>4000 HP</strong></li>
                        <li><span>📅 Duration:</span> <strong>45 Days</strong></li><li><span>📈 Daily PG:</span> <strong>73.33 PG</strong></li>
                        <li><span>🎁 Total PG:</span> <strong>3300 PG</strong></li><li><span>💰 Value:</span> <strong>$66.00</strong></li>
                        <li><span>📊 ROI:</span> <strong class="roi positive">+110% (MAX)</strong></li>
                    </ul><button class="buy-plan-btn" onclick="buyPlan(25)">Buy Now</button></div>
            </div>
        </div>
    </div>
    
    <div id="withdrawal-section" class="view">
        <div class="page-container">
            <div class="page-header">
                <button class="back-button" onclick="showView('mining-section')">‹</button>
                <h2 class="page-title">Withdrawal</h2>
            </div>

            <!-- PG Coin Withdrawal -->
            <div class="withdrawal-form">
                <h3>Withdraw PG Coin</h3>
                <p>Available: <span id="withdraw-pg-balance">0.0000</span> PG</p>
                <p>Minimum: 25 PG | Rate: 25 PG = 60 BDT / $0.50</p>
                <input type="number" id="pg-withdraw-amount" placeholder="Amount (e.g., 25)">
                <input type="text" id="pg-withdraw-address" placeholder="bKash Number or Binance UID">
                <div class="withdraw-btn-group">
                    <button class="withdraw-btn bkash" onclick="handleWithdraw('pg', 'bkash')">bKash</button>
                    <button class="withdraw-btn binance" onclick="handleWithdraw('pg', 'binance')">Binance</button>
                </div>
            </div>

            <!-- USDT Withdrawal -->
            <div class="withdrawal-form">
                <h3>Withdraw USDT</h3>
                <p>Available: <span id="withdraw-usdt-balance">0.000000</span> USDT</p>
                <p>Minimum: 1 USDT | Rate: 1 USDT = 120 BDT</p>
                <input type="number" id="usdt-withdraw-amount" placeholder="Amount (e.g., 1.5)">
                <input type="text" id="usdt-withdraw-address" placeholder="bKash Number or Binance UID">
                <div class="withdraw-btn-group">
                    <button class="withdraw-btn bkash" onclick="handleWithdraw('usdt', 'bkash')">bKash</button>
                    <button class="withdraw-btn binance" onclick="handleWithdraw('usdt', 'binance')">Binance</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Game View -->
    <div id="game-section" class="view">
        <button id="back-to-mining-game">Go Back</button>
        <h1>❄️ Snow & Coin Catcher 💸</h1>
        <div id="scoreboard">
            <span>Score: </span><span id="score">0</span> | 
            <span>Missed: </span><span id="missed">0</span> |
            <span>USDT: </span><span id="usdt-score">0.000000</span> |
            <span>Time: </span><span id="timer-value">60</span>s
        </div>
        <div id="game-container">
            <div id="game-over">
                <h2 id="game-over-title">Game Over!</h2>
                <p>Your Final Score: <span id="final-score">0</span></p>
                <p>Your Total USDT: <span id="final-usdt-score">0.000000</span></p>
                <button id="restart-button">Play Again</button>
            </div>
        </div>
    </div>


    <script>
        // --- MASTER SCRIPT ---
        function showView(viewId) {
            document.querySelectorAll('.view').forEach(view => view.classList.remove('active'));
            const newView = document.getElementById(viewId);
            if(newView) newView.classList.add('active');
            
            document.querySelectorAll('.nav-bar button').forEach(button => button.classList.remove('active'));
            let activeNav = viewId;
            if (['tasks-section', 'plans-section', 'withdrawal-section'].includes(viewId)) {
                activeNav = 'mining-section'; // Keep Home active for sub-pages
            }
            const activeBtn = document.querySelector(`.nav-bar button[onclick="showView('${activeNav}')"]`);
            if (activeBtn) activeBtn.classList.add('active');
            
            if (viewId === 'withdrawal-section') {
                document.getElementById('withdraw-pg-balance').textContent = MiningApp.pgBalance.toFixed(4);
                document.getElementById('withdraw-usdt-balance').textContent = MiningApp.usdtBalance.toFixed(6);
            }

            if (viewId === 'game-section') {
                if (!SnowCatcherGame.isInitialized) SnowCatcherGame.init();
                SnowCatcherGame.startGame();
            } else {
                if (SnowCatcherGame.isInitialized) SnowCatcherGame.endGame('view-switch');
            }
        }

        // --- MINING APP SCRIPT ---
        const MiningApp = {
            balanceEl: document.getElementById('balance'), statusEl: document.getElementById('status'),
            timerEl: document.getElementById('timer'), miningButton: document.getElementById('mining-button'),
            pgBalanceTopEl: document.getElementById('pg-balance-top'), usdBalanceTopEl: document.getElementById('usd-balance-top'),

            MINING_DURATION_MS: 6 * 60 * 60 * 1000, PG_TO_USD_RATE: 0.02,
            PG_PER_HP_PER_DAY: 0.0126, SCORE_TO_PG_RATE: 1000,
            
            pgBalance: 0, usdtBalance: 0, gameTokens: 0, lastGameScore: 0,
            currentPlanHP: 50, referralHP: 0, adsWatchedToday: 0, lastAdWatchDate: null,
            miningInterval: null, timerInterval: null,

            init() {
                this.miningButton.addEventListener('click', () => this.startMining());
                document.getElementById('back-to-mining-game').addEventListener('click', () => showView('mining-section'));
                this.loadState();
            },
            loadState() {
                this.pgBalance = parseFloat(localStorage.getItem('pgCoinBalance')) || 0;
                this.usdtBalance = parseFloat(localStorage.getItem('usdtBalance')) || 0;
                this.gameTokens = parseInt(localStorage.getItem('gameTokens')) || 0;
                this.referralHP = parseInt(localStorage.getItem('referralHP')) || 0;
                this.currentPlanHP = parseInt(localStorage.getItem('currentPlanHP')) || 50;
                this.adsWatchedToday = parseInt(localStorage.getItem('adsWatchedToday')) || 0;
                this.lastAdWatchDate = localStorage.getItem('lastAdWatchDate') || null;

                this.updateBalanceDisplay();
                const miningEndTime = localStorage.getItem('pgCoinEndTime');
                if (miningEndTime && new Date().getTime() < parseInt(miningEndTime)) this.startMining(true);
                else this.stopMining(true);
            },
            startMining(isResuming = false) {
                if (!isResuming) {
                    const endTime = new Date().getTime() + this.MINING_DURATION_MS;
                    localStorage.setItem('pgCoinEndTime', endTime);
                }
                this.statusEl.textContent = 'Active'; this.statusEl.className = 'mining';
                this.miningButton.disabled = true; this.miningButton.textContent = 'Mining...';
                const totalHP = this.currentPlanHP + this.referralHP;
                const ratePerSecond = (totalHP * this.PG_PER_HP_PER_DAY) / 86400;
                this.miningInterval = setInterval(() => {
                    this.pgBalance += ratePerSecond; this.updateBalanceDisplay();
                    localStorage.setItem('pgCoinBalance', this.pgBalance);
                }, 1000);
                this.timerInterval = setInterval(() => this.updateTimer(), 1000);
                this.updateTimer();
            },
            stopMining(sessionExpired = false) {
                clearInterval(this.miningInterval); clearInterval(this.timerInterval);
                this.statusEl.textContent = sessionExpired ? 'Session Ended' : 'Stopped';
                this.statusEl.className = 'stopped'; this.timerEl.textContent = 'Ready to start';
                this.miningButton.disabled = false; this.miningButton.textContent = 'Start Mining';
                if(sessionExpired) localStorage.removeItem('pgCoinEndTime');
            },
            updateTimer() {
                const endTime = parseInt(localStorage.getItem('pgCoinEndTime'));
                if(!endTime) return;
                const remainingTime = endTime - new Date().getTime();
                if (remainingTime <= 0) { this.stopMining(true); return; }
                const h = Math.floor(remainingTime / 3600000);
                const m = Math.floor((remainingTime % 3600000) / 60000);
                const s = Math.floor((remainingTime % 60000) / 1000);
                this.timerEl.textContent = `Time Left: ${String(h).padStart(2, '0')}:${String(m).padStart(2, '0')}:${String(s).padStart(2, '0')}`;
            },
            updateBalanceDisplay() {
                this.balanceEl.textContent = `${this.pgBalance.toFixed(4)} PG`;
                this.pgBalanceTopEl.textContent = this.pgBalance.toFixed(4);
                this.usdBalanceTopEl.textContent = (this.usdtBalance + (this.pgBalance * this.PG_TO_USD_RATE)).toFixed(2);
            },
            addGameUSDT(amount) {
                this.usdtBalance += amount;
                localStorage.setItem('usdtBalance', this.usdtBalance);
                alert(`${amount.toFixed(6)} USDT has been added to your balance!`);
                this.updateBalanceDisplay();
            }
        };

        function buyPlan(price) { alert(`You are trying to buy a plan for $${price}. This feature will be enabled soon!`); }
        function handleInviteClick() {
            MiningApp.gameTokens++; MiningApp.referralHP += 2;
            localStorage.setItem('gameTokens', MiningApp.gameTokens);
            localStorage.setItem('referralHP', MiningApp.referralHP);
            alert('Referral simulation complete!\nYou received +1 Game Token and +2 HP for 30 days.');
        }
        function handleConvertClick() {
            if (MiningApp.lastGameScore > 0) {
                const convertedPG = MiningApp.lastGameScore / MiningApp.SCORE_TO_PG_RATE;
                MiningApp.pgBalance += convertedPG;
                localStorage.setItem('pgCoinBalance', MiningApp.pgBalance);
                alert(`You converted ${MiningApp.lastGameScore} score into ${convertedPG.toFixed(4)} PG!`);
                MiningApp.lastGameScore = 0;
                MiningApp.updateBalanceDisplay();
            } else { alert('You have no game score to convert. Play a game first!'); }
        }
        function handleWithdraw(type, method) {
            const min = type === 'pg' ? 25 : 1;
            const amount = parseFloat(document.getElementById(`${type}-withdraw-amount`).value);
            const address = document.getElementById(`${type}-withdraw-address`).value;
            const balance = type === 'pg' ? MiningApp.pgBalance : MiningApp.usdtBalance;

            if (!amount || isNaN(amount) || !address) { alert('Please fill in both amount and address.'); return; }
            if (amount < min) { alert(`Minimum withdrawal for ${type.toUpperCase()} is ${min}.`); return; }
            if (amount > balance) { alert('Insufficient balance.'); return; }
            
            // Simulation: In a real app, you would deduct the balance here after server confirmation.
            alert(`Withdrawal request for ${amount} ${type.toUpperCase()} to ${address} via ${method} has been submitted for review.`);
        }
        function handleWatchAd() {
            const today = new Date().toISOString().slice(0, 10);
            if (MiningApp.lastAdWatchDate !== today) {
                MiningApp.adsWatchedToday = 0;
                MiningApp.lastAdWatchDate = today;
            }
            if (MiningApp.adsWatchedToday >= 15) { alert('Daily ad limit reached. Please come back tomorrow.'); return; }
            
            MiningApp.adsWatchedToday++;
            localStorage.setItem('adsWatchedToday', MiningApp.adsWatchedToday);
            localStorage.setItem('lastAdWatchDate', MiningApp.lastAdWatchDate);

            const rand = Math.random();
            let rewardMsg = "You watched an ad and received ";
            if (rand < 0.05) { // 5% chance for game token
                MiningApp.gameTokens++; localStorage.setItem('gameTokens', MiningApp.gameTokens);
                rewardMsg += "1 Game Token (RARE)!";
            } else if (rand < 0.40) { // 35% chance for PG coin
                const pgAmount = Math.random() * (0.2 - 0.001) + 0.001;
                MiningApp.pgBalance += pgAmount; localStorage.setItem('pgCoinBalance', MiningApp.pgBalance);
                rewardMsg += `${pgAmount.toFixed(4)} PG Coin!`;
            } else if (rand < 0.75) { // 35% chance for Hash Power
                MiningApp.referralHP += 2; localStorage.setItem('referralHP', MiningApp.referralHP);
                rewardMsg += "+2 HP!";
            } else { // 25% chance for USDT
                const usdtAmount = Math.random() * (0.002 - 0.0001) + 0.0001;
                MiningApp.usdtBalance += usdtAmount; localStorage.setItem('usdtBalance', MiningApp.usdtBalance);
                rewardMsg += `${usdtAmount.toFixed(6)} USDT!`;
            }
            alert(rewardMsg + `\nAds watched today: ${MiningApp.adsWatchedToday}/15`);
            MiningApp.updateBalanceDisplay();
        }

        // --- SNOW CATCHER GAME SCRIPT ---
        const SnowCatcherGame = {
            isInitialized: false, gameContainer: null, scoreSpan: null, missedSpan: null, usdtScoreSpan: null,
            timerSpan: null, gameOverDiv: null, gameOverTitle: null, finalScoreSpan: null,
            finalUsdtScoreSpan: null, restartButton: null,
            score: 0, missed: 0, usdtScore: 0.0, timeRemaining: 60, baseSpeed: 1.0,
            gameLoopInterval: null, objectCreationInterval: null, countdownInterval: null,
            gameTimer: null, isGameOver: true,
            init() {
                if(this.isInitialized) return;
                this.gameContainer = document.querySelector('#game-section #game-container');
                this.scoreSpan = document.querySelector('#game-section #score'); this.missedSpan = document.querySelector('#game-section #missed');
                this.usdtScoreSpan = document.querySelector('#game-section #usdt-score'); this.timerSpan = document.querySelector('#game-section #timer-value');
                this.gameOverDiv = document.querySelector('#game-section #game-over'); this.gameOverTitle = document.querySelector('#game-section #game-over-title');
                this.finalScoreSpan = document.querySelector('#game-section #final-score'); this.finalUsdtScoreSpan = document.querySelector('#game-section #final-usdt-score');
                this.restartButton = document.querySelector('#game-section #restart-button');
                this.gameContainer.addEventListener('pointerdown', (e) => { if (e.target.matches('.falling-object')) this.handleObjectClick(e.target); });
                this.restartButton.addEventListener('click', () => this.startGame()); this.isInitialized = true;
            },
            createFallingObject() { if (this.isGameOver) return; const r = Math.random(); this.createObject(r < 0.08 ? '💣' : (r < 0.15 ? '💸' : '❄️'), r < 0.08 ? 'bomb' : (r < 0.15 ? 'coin' : 'snowflake')); },
            createObject(emoji, type) {
                const obj = document.createElement('div'); obj.className = 'falling-object'; obj.classList.add(type); obj.innerHTML = emoji;
                obj.dataset.type = type; obj.style.left = Math.random() * (this.gameContainer.offsetWidth - 70) + 'px';
                obj.style.top = '-50px'; obj.style.fontSize = (Math.random() * 12 + 24) + 'px';
                obj.dataset.speed = Math.random() * 1.5 + this.baseSpeed; obj.dataset.sway = (Math.random() - 0.5) * 2;
                obj.dataset.swayAngle = Math.random() * Math.PI * 2;
                if (type === 'coin') obj.dataset.value = Math.random() * (0.001 - 0.0001) + 0.0001;
                this.gameContainer.appendChild(obj);
            },
            handleObjectClick(obj) {
                if (this.isGameOver || obj.classList.contains('collected')) return; const type = obj.dataset.type;
                if (type === 'snowflake') { this.score++; this.scoreSpan.textContent = this.score; this.animateAndRemove(obj); } 
                else if (type === 'coin') { this.usdtScore += parseFloat(obj.dataset.value); this.usdtScoreSpan.textContent = this.usdtScore.toFixed(6); this.animateAndRemove(obj); } 
                else if (type === 'bomb') this.endGame('bomb');
            },
            animateAndRemove(obj) { obj.classList.add('collected'); setTimeout(() => { obj.remove(); }, 300); },
            gameLoop() {
                document.querySelectorAll('#game-section .falling-object:not(.collected)').forEach(obj => {
                    let top = parseFloat(obj.style.top) + parseFloat(obj.dataset.speed), left = parseFloat(obj.style.left) + Math.sin(parseFloat(obj.dataset.swayAngle)) * parseFloat(obj.dataset.sway);
                    if (left < 0) left = 0; if (left > this.gameContainer.offsetWidth - obj.offsetWidth) left = this.gameContainer.offsetWidth - obj.offsetWidth;
                    obj.style.top = top + 'px'; obj.style.left = left + 'px'; obj.dataset.swayAngle = parseFloat(obj.dataset.swayAngle) + 0.05;
                    if (top > this.gameContainer.offsetHeight) { if (obj.classList.contains('snowflake')) { this.missed++; this.missedSpan.textContent = this.missed; } obj.remove(); }
                });
            },
            setCreationInterval(ms) { clearInterval(this.objectCreationInterval); this.objectCreationInterval = setInterval(() => this.createFallingObject(), ms); },
            startGame() {
                this.isGameOver = false; this.score = 0; this.missed = 0; this.usdtScore = 0.0; this.timeRemaining = 60; this.baseSpeed = 1.0;
                this.scoreSpan.textContent = this.score; this.missedSpan.textContent = this.missed; this.usdtScoreSpan.textContent = this.usdtScore.toFixed(6);
                this.timerSpan.textContent = this.timeRemaining; this.gameOverDiv.style.display = 'none'; this.gameContainer.style.cursor = 'crosshair';
                document.querySelectorAll('#game-section .falling-object').forEach(el => el.remove()); this.clearAllIntervals();
                this.gameLoopInterval = setInterval(() => this.gameLoop(), 16); this.setCreationInterval(800); this.gameTimer = setTimeout(() => this.endGame('time'), 60000);
                this.countdownInterval = setInterval(() => {
                    this.timeRemaining--; this.timerSpan.textContent = this.timeRemaining; this.baseSpeed += 0.05;
                    if (this.timeRemaining === 45) this.setCreationInterval(600); else if (this.timeRemaining === 30) this.setCreationInterval(400); else if (this.timeRemaining === 15) this.setCreationInterval(250);
                }, 1000);
            },
            clearAllIntervals() { clearInterval(this.gameLoopInterval); clearInterval(this.objectCreationInterval); clearInterval(this.countdownInterval); clearTimeout(this.gameTimer); },
            endGame(reason) {
                if (this.isGameOver) return; this.isGameOver = true; this.clearAllIntervals();
                if (reason === 'view-switch') return;
                MiningApp.lastGameScore = this.score; if(this.usdtScore > 0) MiningApp.addGameUSDT(this.usdtScore);
                if (reason === 'bomb') {
                    this.gameOverTitle.textContent = "You hit a bomb!"; this.gameOverTitle.style.color = "var(--red-glow)";
                    this.finalScoreSpan.textContent = "0 (Void)"; this.finalUsdtScoreSpan.textContent = "0.000000 (Void)";
                } else {
                    this.gameOverTitle.textContent = "Time's Up!"; this.gameOverTitle.style.color = "var(--primary-color)";
                    this.finalScoreSpan.textContent = this.score; this.finalUsdtScoreSpan.textContent = this.usdtScore.toFixed(6);
                }
                this.gameOverDiv.style.display = 'block'; this.gameContainer.style.cursor = 'default';
            }
        };

        // --- App Initialization ---
        document.addEventListener('DOMContentLoaded', () => {
            MiningApp.init();
            showView('mining-section');
        });
    </script>
</body>
</html>